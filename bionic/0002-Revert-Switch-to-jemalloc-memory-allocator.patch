From 18249d20c7994abf9efe5795516efbadbe0470a1 Mon Sep 17 00:00:00 2001
From: Woomymy <woomy@woomy.be>
Date: Wed, 18 Jan 2023 22:10:35 +0100
Subject: [PATCH 2/2] Revert "Switch to jemalloc memory allocator"

This reverts commit 9e3a6c972f82910d2ae0faf56b8db3a0c2bd83a6.

Signed-off-by: Woomymy <woomy@woomy.be>
---
 libc/Android.bp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/libc/Android.bp b/libc/Android.bp
index b6551f551..7304aa2a2 100644
--- a/libc/Android.bp
+++ b/libc/Android.bp
@@ -126,6 +126,9 @@ cc_defaults {
         malloc_pattern_fill_contents: {
             cflags: ["-DSCUDO_PATTERN_FILL_CONTENTS"],
         },
+        malloc_not_svelte: {
+            cflags: ["-DUSE_SCUDO"],
+        },
     },
 
     lto: {
@@ -158,6 +161,7 @@ cc_defaults {
         "libc_jemalloc_wrapper",
     ],
     header_libs: ["gwp_asan_headers"],
+    product_variables: libc_scudo_product_variables,
 }
 
 // Functions not implemented by jemalloc directly, or that need to
-- 
2.39.1

